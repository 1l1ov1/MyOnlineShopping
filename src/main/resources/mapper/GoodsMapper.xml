<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.wan.mapper.GoodsMapper">
    <resultMap id="goodsPageQueryDTO" type="com.wan.dto.GoodsPageQueryDTO">
        <id column="id" property="id"></id>
        <result column="goods_name" property="goodsName"></result>
        <result column="price" property="price"></result>
        <result column="status" property="status"></result>
        <result column="total" property="total"></result>
        <result column="discount" property="discount"></result>
        <result column="description" property="description"></result>
        <result column="cover_pic" property="coverPic"></result>
        <result column="create_time" property="createTime"></result>
        <result column="update_time" property="updateTime"></result>
        <association property="store" javaType="com.wan.entity.Store"
        select="findStore"
        column="store_name">

        </association>
    </resultMap>

    <resultMap id="store" type="com.wan.entity.Store">
        <id column="id" property="id"></id>
        <result column="store_name" property="storeName"></result>
        <result column="user_id" property="userId"></result>
        <result column="create_time" property="createTime"></result>
        <result column="update_time" property="updateTime"></result>
    </resultMap>
    <select id="pageQuery" resultType="com.wan.vo.GoodsPageQueryVO">
        select * from goods
            <where>
                <if test="goodsName != null">
                    goods_name = #{goodsName}
                </if>
                <if test="status != null">
                    status = #{status}
                </if>
            </where>
        order by create_time
    </select>

    <select id="findStore" resultMap="store">
        select * from store where store_name = #{storeName}
    </select>
</mapper>